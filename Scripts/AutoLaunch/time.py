#!/usr/bin/env python3

from datetime import datetime
import os
import time
import iterm2
import pytz

ICON1X = "iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA/klEQVQ4jc3SvS5FURAF4M8NDYmIn5aEZ6ChQaFBrxD3JRRqbyEqxRVar" \
         "mhJROjFC4jCT8JtEAU5yRyZyBGnUJhkZe89s9aafWYffxUDaOEjsFThu5zqO+jPxb1UPMIoprAemMQYjhOvlQ06kdzCLM4TscQZ5rAd50" \
         "42uMUuVvCWRBuB8vwanH3cZIMRzOPxW9fFQM49BLfQaITBfQxpsMajDMWQC43uSHZhIfZPaGMYV5iuMCm5XwbF2hv7O2zGVV8wU2HQhx6" \
         "85+RpxeR/wkkpaiSDgxrf/yv3sEb3dhbkGxTxXKN7MeTKaOIaE1jDZfxtBS6wivHgFNz/EPgE799W245hq7EAAAAASUVORK5CYII="

ICON2X = "iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAABm0lEQVRIie2WzUoCURTHfwVhQl+6cJNPU" \
         "KvcFPUMFT1BH1g9QCCmm15HCgrqEQIjKygLpEWbWrgyE11YgS1mJqfhjHMu3Hb+4cAwc/7nd8/M3MuBoWAROAUaQBeoAjkgpvDG3Nx7oA" \
         "PUgRKQiTLuA99AT4gtBTgb4v0CNsNMSwOgBQXU01FIjU9COj+LgCaBHTevBrTdqOF8mm0gEQEvSeBGCDQOFIGPkGL+aPo8ErwugbsCNA3" \
         "cKoDBqACzArwtgR8E6NuA4svAyoDnrwL8TgLnfNC4olNPUZ2P++AHEjhGf8sUIwpqwT0g7+ZliTgLkuh+JC24Sf9v/9WoAN4ApgatzFDT" \
         "wLoGvGoR6mlNA57/B/CcJqmFvHXCpNnXraBJ6nhEec+6njE/qaKiFoRIHT/a7QOAJw344h/A55qkBPCOvdfcAGa0KyxYBOcx0BhwaQF6h" \
         "W5W+6OMBfCCKTSFM132cAY1U6Dnqbq11Kr4jGnMRp9DnAHAW/i1CbgM3ARWOwnsASfAC87c3HGvj4FdYMKXn3JrlE3AQ1nXDxnvStm/nl" \
         "D9AAAAAElFTkSuQmCC"


def emoji(country):
    offset = 127397
    return chr(ord(country[0]) + offset) + chr(ord(country[1]) + offset)


timezones = {
    "Africa/Abidjan": "ğŸ‡¨ğŸ‡®",
    "Africa/Accra": "ğŸ‡¬ğŸ‡­",
    "Africa/Addis_Ababa": "ğŸ‡ªğŸ‡¹",
    "Africa/Algiers": "ğŸ‡©ğŸ‡¿",
    "Africa/Asmara": "ğŸ‡ªğŸ‡·",
    "Africa/Asmera": "ğŸ‡ªğŸ‡·",
    "Africa/Bamako": "ğŸ‡²ğŸ‡±",
    "Africa/Bangui": "ğŸ‡¨ğŸ‡«",
    "Africa/Banjul": "ğŸ‡¬ğŸ‡²",
    "Africa/Bissau": "ğŸ‡¬ğŸ‡¼",
    "Africa/Blantyre": "ğŸ‡²ğŸ‡¼",
    "Africa/Brazzaville": "ğŸ‡¨ğŸ‡¬",
    "Africa/Bujumbura": "ğŸ‡§ğŸ‡®",
    "Africa/Cairo": "ğŸ‡ªğŸ‡¬",
    "Africa/Casablanca": "ğŸ‡²ğŸ‡¦",
    "Africa/Ceuta": "ğŸ‡ªğŸ‡¸",
    "Africa/Conakry": "ğŸ‡¬ğŸ‡³",
    "Africa/Dakar": "ğŸ‡¸ğŸ‡³",
    "Africa/Dar_es_Salaam": "ğŸ‡¹ğŸ‡¿",
    "Africa/Djibouti": "ğŸ‡©ğŸ‡¯",
    "Africa/Douala": "ğŸ‡¨ğŸ‡²",
    "Africa/El_Aaiun": "ğŸ‡ªğŸ‡­",
    "Africa/Freetown": "ğŸ‡¸ğŸ‡±",
    "Africa/Gaborone": "ğŸ‡§ğŸ‡¼",
    "Africa/Harare": "ğŸ‡¿ğŸ‡¼",
    "Africa/Johannesburg": "ğŸ‡¿ğŸ‡¦",
    "Africa/Juba": "ğŸ‡¸ğŸ‡¸",
    "Africa/Kampala": "ğŸ‡ºğŸ‡¬",
    "Africa/Khartoum": "ğŸ‡¸ğŸ‡©",
    "Africa/Kigali": "ğŸ‡·ğŸ‡¼",
    "Africa/Kinshasa": "ğŸ‡¨ğŸ‡©",
    "Africa/Lagos": "ğŸ‡³ğŸ‡¬",
    "Africa/Libreville": "ğŸ‡¬ğŸ‡¦",
    "Africa/Lome": "ğŸ‡¹ğŸ‡¬",
    "Africa/Luanda": "ğŸ‡¦ğŸ‡´",
    "Africa/Lubumbashi": "ğŸ‡¨ğŸ‡©",
    "Africa/Lusaka": "ğŸ‡¿ğŸ‡²",
    "Africa/Malabo": "ğŸ‡¬ğŸ‡¶",
    "Africa/Maputo": "ğŸ‡²ğŸ‡¿",
    "Africa/Maseru": "ğŸ‡±ğŸ‡¸",
    "Africa/Mbabane": "ğŸ‡¸ğŸ‡¿",
    "Africa/Mogadishu": "ğŸ‡¸ğŸ‡´",
    "Africa/Monrovia": "ğŸ‡±ğŸ‡·",
    "Africa/Nairobi": "ğŸ‡°ğŸ‡ª",
    "Africa/Ndjamena": "ğŸ‡¹ğŸ‡©",
    "Africa/Niamey": "ğŸ‡³ğŸ‡ª",
    "Africa/Nouakchott": "ğŸ‡²ğŸ‡·",
    "Africa/Ouagadougou": "ğŸ‡§ğŸ‡«",
    "Africa/Porto-Novo": "ğŸ‡§ğŸ‡¯",
    "Africa/Sao_Tome": "ğŸ‡¸ğŸ‡¹",
    "Africa/Timbuktu": "ğŸ‡²ğŸ‡±",
    "Africa/Tripoli": "ğŸ‡±ğŸ‡¾",
    "Africa/Tunis": "ğŸ‡¹ğŸ‡³",
    "Africa/Windhoek": "ğŸ‡³ğŸ‡¦",
    "America/Adak": "ğŸ‡ºğŸ‡¸",
    "America/Anchorage": "ğŸ‡ºğŸ‡¸",
    "America/Anguilla": "ğŸ‡¦ğŸ‡®",
    "America/Antigua": "ğŸ‡¦ğŸ‡¬",
    "America/Araguaina": "ğŸ‡§ğŸ‡·",
    "America/Argentina/Buenos_Aires": "ğŸ‡¦ğŸ‡·",
    "America/Argentina/Catamarca": "ğŸ‡¦ğŸ‡·",
    "America/Argentina/ComodRivadavia": "ğŸ‡¦ğŸ‡·",
    "America/Argentina/Cordoba": "ğŸ‡¦ğŸ‡·",
    "America/Argentina/Jujuy": "ğŸ‡¦ğŸ‡·",
    "America/Argentina/La_Rioja": "ğŸ‡¦ğŸ‡·",
    "America/Argentina/Mendoza": "ğŸ‡¦ğŸ‡·",
    "America/Argentina/Rio_Gallegos": "ğŸ‡¦ğŸ‡·",
    "America/Argentina/Salta": "ğŸ‡¦ğŸ‡·",
    "America/Argentina/San_Juan": "ğŸ‡¦ğŸ‡·",
    "America/Argentina/San_Luis": "ğŸ‡¦ğŸ‡·",
    "America/Argentina/Tucuman": "ğŸ‡¦ğŸ‡·",
    "America/Argentina/Ushuaia": "ğŸ‡¦ğŸ‡·",
    "America/Aruba": "ğŸ‡¦ğŸ‡¼",
    "America/Asuncion": "ğŸ‡µğŸ‡¾",
    "America/Atikokan": "ğŸ‡¨ğŸ‡¦",
    "America/Atka": "ğŸ‡ºğŸ‡¸",
    "America/Bahia": "ğŸ‡§ğŸ‡·",
    "America/Bahia_Banderas": "ğŸ‡²ğŸ‡½",
    "America/Barbados": "ğŸ‡§ğŸ‡§",
    "America/Belem": "ğŸ‡§ğŸ‡·",
    "America/Belize": "ğŸ‡§ğŸ‡¿",
    "America/Blanc-Sablon": "ğŸ‡¨ğŸ‡¦",
    "America/Boa_Vista": "ğŸ‡§ğŸ‡·",
    "America/Bogota": "ğŸ‡¨ğŸ‡´",
    "America/Boise": "ğŸ‡ºğŸ‡¸",
    "America/Buenos_Aires": "ğŸ‡¦ğŸ‡·",
    "America/Cambridge_Bay": "ğŸ‡¨ğŸ‡¦",
    "America/Campo_Grande": "ğŸ‡§ğŸ‡·",
    "America/Cancun": "ğŸ‡²ğŸ‡½",
    "America/Caracas": "ğŸ‡»ğŸ‡ª",
    "America/Catamarca": "ğŸ‡¦ğŸ‡·",
    "America/Cayenne": "ğŸ‡¬ğŸ‡«",
    "America/Cayman": "ğŸ‡°ğŸ‡¾",
    "America/Chicago": "ğŸ‡ºğŸ‡¸",
    "America/Chihuahua": "ğŸ‡²ğŸ‡½",
    "America/Coral_Harbour": "ğŸ‡¨ğŸ‡¦",
    "America/Cordoba": "ğŸ‡¦ğŸ‡·",
    "America/Costa_Rica": "ğŸ‡¨ğŸ‡·",
    "America/Creston": "ğŸ‡¨ğŸ‡¦",
    "America/Cuiaba": "ğŸ‡§ğŸ‡·",
    "America/Curacao": "ğŸ‡¨ğŸ‡¼",
    "America/Danmarkshavn": "ğŸ‡¬ğŸ‡±",
    "America/Dawson": "ğŸ‡¨ğŸ‡¦",
    "America/Dawson_Creek": "ğŸ‡¨ğŸ‡¦",
    "America/Denver": "ğŸ‡ºğŸ‡¸",
    "America/Detroit": "ğŸ‡ºğŸ‡¸",
    "America/Dominica": "ğŸ‡©ğŸ‡²",
    "America/Edmonton": "ğŸ‡¨ğŸ‡¦",
    "America/Eirunepe": "ğŸ‡§ğŸ‡·",
    "America/El_Salvador": "ğŸ‡¸ğŸ‡»",
    "America/Ensenada": "ğŸ‡²ğŸ‡½",
    "America/Fort_Nelson": "ğŸ‡¨ğŸ‡¦",
    "America/Fort_Wayne": "ğŸ‡ºğŸ‡¸",
    "America/Fortaleza": "ğŸ‡§ğŸ‡·",
    "America/Glace_Bay": "ğŸ‡¨ğŸ‡¦",
    "America/Godthab": "ğŸ‡¬ğŸ‡±",
    "America/Goose_Bay": "ğŸ‡¨ğŸ‡¦",
    "America/Grand_Turk": "ğŸ‡¹ğŸ‡¨",
    "America/Grenada": "ğŸ‡¬ğŸ‡©",
    "America/Guadeloupe": "ğŸ‡¬ğŸ‡µ",
    "America/Guatemala": "ğŸ‡¬ğŸ‡¹",
    "America/Guayaquil": "ğŸ‡ªğŸ‡¨",
    "America/Guyana": "ğŸ‡¬ğŸ‡¾",
    "America/Halifax": "ğŸ‡¨ğŸ‡¦",
    "America/Havana": "ğŸ‡¨ğŸ‡º",
    "America/Hermosillo": "ğŸ‡²ğŸ‡½",
    "America/Indiana/Indianapolis": "ğŸ‡ºğŸ‡¸",
    "America/Indiana/Knox": "ğŸ‡ºğŸ‡¸",
    "America/Indiana/Marengo": "ğŸ‡ºğŸ‡¸",
    "America/Indiana/Petersburg": "ğŸ‡ºğŸ‡¸",
    "America/Indiana/Tell_City": "ğŸ‡ºğŸ‡¸",
    "America/Indiana/Vevay": "ğŸ‡ºğŸ‡¸",
    "America/Indiana/Vincennes": "ğŸ‡ºğŸ‡¸",
    "America/Indiana/Winamac": "ğŸ‡ºğŸ‡¸",
    "America/Indianapolis": "ğŸ‡ºğŸ‡¸",
    "America/Inuvik": "ğŸ‡¨ğŸ‡¦",
    "America/Iqaluit": "ğŸ‡¨ğŸ‡¦",
    "America/Jamaica": "ğŸ‡¯ğŸ‡²",
    "America/Jujuy": "ğŸ‡¦ğŸ‡·",
    "America/Juneau": "ğŸ‡ºğŸ‡¸",
    "America/Kentucky/Louisville": "ğŸ‡ºğŸ‡¸",
    "America/Kentucky/Monticello": "ğŸ‡ºğŸ‡¸",
    "America/Knox_IN": "ğŸ‡ºğŸ‡¸",
    "America/Kralendijk": "ğŸ‡§ğŸ‡¶",
    "America/La_Paz": "ğŸ‡§ğŸ‡´",
    "America/Lima": "ğŸ‡µğŸ‡ª",
    "America/Los_Angeles": "ğŸ‡ºğŸ‡¸",
    "America/Louisville": "ğŸ‡ºğŸ‡¸",
    "America/Lower_Princes": "ğŸ‡¸ğŸ‡½",
    "America/Maceio": "ğŸ‡§ğŸ‡·",
    "America/Managua": "ğŸ‡³ğŸ‡®",
    "America/Manaus": "ğŸ‡§ğŸ‡·",
    "America/Marigot": "ğŸ‡²ğŸ‡«",
    "America/Martinique": "ğŸ‡²ğŸ‡¶",
    "America/Matamoros": "ğŸ‡²ğŸ‡½",
    "America/Mazatlan": "ğŸ‡²ğŸ‡½",
    "America/Mendoza": "ğŸ‡¦ğŸ‡·",
    "America/Menominee": "ğŸ‡ºğŸ‡¸",
    "America/Merida": "ğŸ‡²ğŸ‡½",
    "America/Metlakatla": "ğŸ‡ºğŸ‡¸",
    "America/Mexico_City": "ğŸ‡²ğŸ‡½",
    "America/Miquelon": "ğŸ‡µğŸ‡²",
    "America/Moncton": "ğŸ‡¨ğŸ‡¦",
    "America/Monterrey": "ğŸ‡²ğŸ‡½",
    "America/Montevideo": "ğŸ‡ºğŸ‡¾",
    "America/Montreal": "ğŸ‡¨ğŸ‡¦",
    "America/Montserrat": "ğŸ‡²ğŸ‡¸",
    "America/Nassau": "ğŸ‡§ğŸ‡¸",
    "America/New_York": "ğŸ‡ºğŸ‡¸",
    "America/Nipigon": "ğŸ‡¨ğŸ‡¦",
    "America/Nome": "ğŸ‡ºğŸ‡¸",
    "America/Noronha": "ğŸ‡§ğŸ‡·",
    "America/North_Dakota/Beulah": "ğŸ‡ºğŸ‡¸",
    "America/North_Dakota/Center": "ğŸ‡ºğŸ‡¸",
    "America/North_Dakota/New_Salem": "ğŸ‡ºğŸ‡¸",
    "America/Ojinaga": "ğŸ‡²ğŸ‡½",
    "America/Panama": "ğŸ‡µğŸ‡¦",
    "America/Pangnirtung": "ğŸ‡¨ğŸ‡¦",
    "America/Paramaribo": "ğŸ‡¸ğŸ‡·",
    "America/Phoenix": "ğŸ‡ºğŸ‡¸",
    "America/Port_of_Spain": "ğŸ‡¹ğŸ‡¹",
    "America/Port-au-Prince": "ğŸ‡­ğŸ‡¹",
    "America/Porto_Acre": "ğŸ‡§ğŸ‡·",
    "America/Porto_Velho": "ğŸ‡§ğŸ‡·",
    "America/Puerto_Rico": "ğŸ‡µğŸ‡·",
    "America/Punta_Arenas": "ğŸ‡¨ğŸ‡±",
    "America/Rainy_River": "ğŸ‡¨ğŸ‡¦",
    "America/Rankin_Inlet": "ğŸ‡¨ğŸ‡¦",
    "America/Recife": "ğŸ‡§ğŸ‡·",
    "America/Regina": "ğŸ‡¨ğŸ‡¦",
    "America/Resolute": "ğŸ‡¨ğŸ‡¦",
    "America/Rio_Branco": "ğŸ‡§ğŸ‡·",
    "America/Rosario": "ğŸ‡¦ğŸ‡·",
    "America/Santa_Isabel": "ğŸ‡²ğŸ‡½",
    "America/Santarem": "ğŸ‡§ğŸ‡·",
    "America/Santiago": "ğŸ‡¨ğŸ‡±",
    "America/Santo_Domingo": "ğŸ‡©ğŸ‡´",
    "America/Sao_Paulo": "ğŸ‡§ğŸ‡·",
    "America/Scoresbysund": "ğŸ‡¬ğŸ‡±",
    "America/Shiprock": "ğŸ‡ºğŸ‡¸",
    "America/Sitka": "ğŸ‡ºğŸ‡¸",
    "America/St_Barthelemy": "ğŸ‡§ğŸ‡±",
    "America/St_Johns": "ğŸ‡¨ğŸ‡¦",
    "America/St_Kitts": "ğŸ‡°ğŸ‡³",
    "America/St_Lucia": "ğŸ‡±ğŸ‡¨",
    "America/St_Thomas": "ğŸ‡»ğŸ‡®",
    "America/St_Vincent": "ğŸ‡»ğŸ‡¨",
    "America/Swift_Current": "ğŸ‡¨ğŸ‡¦",
    "America/Tegucigalpa": "ğŸ‡­ğŸ‡³",
    "America/Thule": "ğŸ‡¬ğŸ‡±",
    "America/Thunder_Bay": "ğŸ‡¨ğŸ‡¦",
    "America/Tijuana": "ğŸ‡²ğŸ‡½",
    "America/Toronto": "ğŸ‡¨ğŸ‡¦",
    "America/Tortola": "ğŸ‡»ğŸ‡¬",
    "America/Vancouver": "ğŸ‡¨ğŸ‡¦",
    "America/Virgin": "ğŸ‡ºğŸ‡¸",
    "America/Whitehorse": "ğŸ‡¨ğŸ‡¦",
    "America/Winnipeg": "ğŸ‡¨ğŸ‡¦",
    "America/Yakutat": "ğŸ‡ºğŸ‡¸",
    "America/Yellowknife": "ğŸ‡¨ğŸ‡¦",
    "Antarctica/Casey": "ğŸ‡¦ğŸ‡¶",
    "Antarctica/Davis": "ğŸ‡¦ğŸ‡¶",
    "Antarctica/DumontDUrville": "ğŸ‡¦ğŸ‡¶",
    "Antarctica/Macquarie": "ğŸ‡¦ğŸ‡º",
    "Antarctica/Mawson": "ğŸ‡¦ğŸ‡¶",
    "Antarctica/McMurdo": "ğŸ‡¦ğŸ‡¶",
    "Antarctica/Palmer": "ğŸ‡¦ğŸ‡¶",
    "Antarctica/Rothera": "ğŸ‡¦ğŸ‡¶",
    "Antarctica/South_Pole": "ğŸ‡¦ğŸ‡¶",
    "Antarctica/Syowa": "ğŸ‡¦ğŸ‡¶",
    "Antarctica/Troll": "ğŸ‡¦ğŸ‡¶",
    "Antarctica/Vostok": "ğŸ‡¦ğŸ‡¶",
    "Arctic/Longyearbyen": "ğŸ‡¸ğŸ‡¯",
    "Asia/Aden": "ğŸ‡¾ğŸ‡ª",
    "Asia/Almaty": "ğŸ‡°ğŸ‡¿",
    "Asia/Amman": "ğŸ‡¯ğŸ‡´",
    "Asia/Anadyr": "ğŸ‡·ğŸ‡º",
    "Asia/Aqtau": "ğŸ‡°ğŸ‡¿",
    "Asia/Aqtobe": "ğŸ‡°ğŸ‡¿",
    "Asia/Ashgabat": "ğŸ‡¹ğŸ‡²",
    "Asia/Ashkhabad": "ğŸ‡¹ğŸ‡²",
    "Asia/Atyrau": "ğŸ‡°ğŸ‡¿",
    "Asia/Baghdad": "ğŸ‡®ğŸ‡¶",
    "Asia/Bahrain": "ğŸ‡§ğŸ‡­",
    "Asia/Baku": "ğŸ‡¦ğŸ‡¿",
    "Asia/Bangkok": "ğŸ‡¹ğŸ‡­",
    "Asia/Barnaul": "ğŸ‡·ğŸ‡º",
    "Asia/Beirut": "ğŸ‡±ğŸ‡§",
    "Asia/Bishkek": "ğŸ‡°ğŸ‡¬",
    "Asia/Brunei": "ğŸ‡§ğŸ‡³",
    "Asia/Calcutta": "ğŸ‡®ğŸ‡³",
    "Asia/Chita": "ğŸ‡·ğŸ‡º",
    "Asia/Choibalsan": "ğŸ‡²ğŸ‡³",
    "Asia/Chongqing": "ğŸ‡¨ğŸ‡³",
    "Asia/Chungking": "ğŸ‡¨ğŸ‡³",
    "Asia/Colombo": "ğŸ‡±ğŸ‡°",
    "Asia/Dacca": "ğŸ‡§ğŸ‡©",
    "Asia/Damascus": "ğŸ‡¸ğŸ‡¾",
    "Asia/Dhaka": "ğŸ‡§ğŸ‡©",
    "Asia/Dili": "ğŸ‡¹ğŸ‡±",
    "Asia/Dubai": "ğŸ‡¦ğŸ‡ª",
    "Asia/Dushanbe": "ğŸ‡¹ğŸ‡¯",
    "Asia/Famagusta": "ğŸ‡¨ğŸ‡¾",
    "Asia/Gaza": "ğŸ‡µğŸ‡¸",
    "Asia/Harbin": "ğŸ‡¨ğŸ‡³",
    "Asia/Hebron": "ğŸ‡µğŸ‡¸",
    "Asia/Ho_Chi_Minh": "ğŸ‡»ğŸ‡³",
    "Asia/Hong_Kong": "ğŸ‡­ğŸ‡°",
    "Asia/Hovd": "ğŸ‡²ğŸ‡³",
    "Asia/Irkutsk": "ğŸ‡·ğŸ‡º",
    "Asia/Istanbul": "ğŸ‡¹ğŸ‡·",
    "Asia/Jakarta": "ğŸ‡®ğŸ‡©",
    "Asia/Jayapura": "ğŸ‡®ğŸ‡©",
    "Asia/Jerusalem": "ğŸ‡®ğŸ‡±",
    "Asia/Kabul": "ğŸ‡¦ğŸ‡«",
    "Asia/Kamchatka": "ğŸ‡·ğŸ‡º",
    "Asia/Karachi": "ğŸ‡µğŸ‡°",
    "Asia/Kashgar": "ğŸ‡¨ğŸ‡³",
    "Asia/Kathmandu": "ğŸ‡³ğŸ‡µ",
    "Asia/Katmandu": "ğŸ‡³ğŸ‡µ",
    "Asia/Khandyga": "ğŸ‡·ğŸ‡º",
    "Asia/Kolkata": "ğŸ‡®ğŸ‡³",
    "Asia/Krasnoyarsk": "ğŸ‡·ğŸ‡º",
    "Asia/Kuala_Lumpur": "ğŸ‡²ğŸ‡¾",
    "Asia/Kuching": "ğŸ‡²ğŸ‡¾",
    "Asia/Kuwait": "ğŸ‡°ğŸ‡¼",
    "Asia/Macao": "ğŸ‡²ğŸ‡´",
    "Asia/Macau": "ğŸ‡²ğŸ‡´",
    "Asia/Magadan": "ğŸ‡·ğŸ‡º",
    "Asia/Makassar": "ğŸ‡®ğŸ‡©",
    "Asia/Manila": "ğŸ‡µğŸ‡­",
    "Asia/Muscat": "ğŸ‡´ğŸ‡²",
    "Asia/Nicosia": "ğŸ‡¨ğŸ‡¾",
    "Asia/Novokuznetsk": "ğŸ‡·ğŸ‡º",
    "Asia/Novosibirsk": "ğŸ‡·ğŸ‡º",
    "Asia/Omsk": "ğŸ‡·ğŸ‡º",
    "Asia/Oral": "ğŸ‡°ğŸ‡¿",
    "Asia/Phnom_Penh": "ğŸ‡°ğŸ‡­",
    "Asia/Pontianak": "ğŸ‡®ğŸ‡©",
    "Asia/Pyongyang": "ğŸ‡°ğŸ‡µ",
    "Asia/Qatar": "ğŸ‡¶ğŸ‡¦",
    "Asia/Qostanay": "ğŸ‡°ğŸ‡¿",
    "Asia/Qyzylorda": "ğŸ‡°ğŸ‡¿",
    "Asia/Rangoon": "ğŸ‡²ğŸ‡²",
    "Asia/Riyadh": "ğŸ‡¸ğŸ‡¦",
    "Asia/Saigon": "ğŸ‡»ğŸ‡³",
    "Asia/Sakhalin": "ğŸ‡·ğŸ‡º",
    "Asia/Samarkand": "ğŸ‡ºğŸ‡¿",
    "Asia/Seoul": "ğŸ‡°ğŸ‡·",
    "Asia/Shanghai": "ğŸ‡¨ğŸ‡³",
    "Asia/Singapore": "ğŸ‡¸ğŸ‡¬",
    "Asia/Srednekolymsk": "ğŸ‡·ğŸ‡º",
    "Asia/Taipei": "ğŸ‡¹ğŸ‡¼",
    "Asia/Tashkent": "ğŸ‡ºğŸ‡¿",
    "Asia/Tbilisi": "ğŸ‡¬ğŸ‡ª",
    "Asia/Tehran": "ğŸ‡®ğŸ‡·",
    "Asia/Tel_Aviv": "ğŸ‡®ğŸ‡±",
    "Asia/Thimbu": "ğŸ‡§ğŸ‡¹",
    "Asia/Thimphu": "ğŸ‡§ğŸ‡¹",
    "Asia/Tokyo": "ğŸ‡¯ğŸ‡µ",
    "Asia/Tomsk": "ğŸ‡·ğŸ‡º",
    "Asia/Ujung_Pandang": "ğŸ‡®ğŸ‡©",
    "Asia/Ulaanbaatar": "ğŸ‡²ğŸ‡³",
    "Asia/Ulan_Bator": "ğŸ‡²ğŸ‡³",
    "Asia/Urumqi": "ğŸ‡¨ğŸ‡³",
    "Asia/Ust-Nera": "ğŸ‡·ğŸ‡º",
    "Asia/Vientiane": "ğŸ‡±ğŸ‡¦",
    "Asia/Vladivostok": "ğŸ‡·ğŸ‡º",
    "Asia/Yakutsk": "ğŸ‡·ğŸ‡º",
    "Asia/Yangon": "ğŸ‡²ğŸ‡²",
    "Asia/Yekaterinburg": "ğŸ‡·ğŸ‡º",
    "Asia/Yerevan": "ğŸ‡¦ğŸ‡²",
    "Atlantic/Azores": "ğŸ‡µğŸ‡¹",
    "Atlantic/Bermuda": "ğŸ‡§ğŸ‡²",
    "Atlantic/Canary": "ğŸ‡ªğŸ‡¸",
    "Atlantic/Cape_Verde": "ğŸ‡¨ğŸ‡»",
    "Atlantic/Faeroe": "ğŸ‡«ğŸ‡´",
    "Atlantic/Faroe": "ğŸ‡«ğŸ‡´",
    "Atlantic/Jan_Mayen": "ğŸ‡¸ğŸ‡¯",
    "Atlantic/Madeira": "ğŸ‡µğŸ‡¹",
    "Atlantic/Reykjavik": "ğŸ‡®ğŸ‡¸",
    "Atlantic/South_Georgia": "ğŸ‡¬ğŸ‡¸",
    "Atlantic/St_Helena": "ğŸ‡¸ğŸ‡­",
    "Atlantic/Stanley": "ğŸ‡«ğŸ‡°",
    "Australia/ACT": "ğŸ‡¦ğŸ‡º",
    "Australia/Adelaide": "ğŸ‡¦ğŸ‡º",
    "Australia/Brisbane": "ğŸ‡¦ğŸ‡º",
    "Australia/Broken_Hill": "ğŸ‡¦ğŸ‡º",
    "Australia/Canberra": "ğŸ‡¦ğŸ‡º",
    "Australia/Currie": "ğŸ‡¦ğŸ‡º",
    "Australia/Darwin": "ğŸ‡¦ğŸ‡º",
    "Australia/Eucla": "ğŸ‡¦ğŸ‡º",
    "Australia/Hobart": "ğŸ‡¦ğŸ‡º",
    "Australia/LHI": "ğŸ‡¦ğŸ‡º",
    "Australia/Lindeman": "ğŸ‡¦ğŸ‡º",
    "Australia/Lord_Howe": "ğŸ‡¦ğŸ‡º",
    "Australia/Melbourne": "ğŸ‡¦ğŸ‡º",
    "Australia/North": "ğŸ‡¦ğŸ‡º",
    "Australia/NSW": "ğŸ‡¦ğŸ‡º",
    "Australia/Perth": "ğŸ‡¦ğŸ‡º",
    "Australia/Queensland": "ğŸ‡¦ğŸ‡º",
    "Australia/South": "ğŸ‡¦ğŸ‡º",
    "Australia/Sydney": "ğŸ‡¦ğŸ‡º",
    "Australia/Tasmania": "ğŸ‡¦ğŸ‡º",
    "Australia/Victoria": "ğŸ‡¦ğŸ‡º",
    "Australia/West": "ğŸ‡¦ğŸ‡º",
    "Australia/Yancowinna": "ğŸ‡¦ğŸ‡º",
    "Brazil/Acre": "ğŸ‡§ğŸ‡·",
    "Brazil/DeNoronha": "ğŸ‡§ğŸ‡·",
    "Brazil/East": "ğŸ‡§ğŸ‡·",
    "Brazil/West": "ğŸ‡§ğŸ‡·",
    "Canada/Atlantic": "ğŸ‡¨ğŸ‡¦",
    "Canada/Central": "ğŸ‡¨ğŸ‡¦",
    "Canada/Eastern": "ğŸ‡¨ğŸ‡¦",
    "Canada/Mountain": "ğŸ‡¨ğŸ‡¦",
    "Canada/Newfoundland": "ğŸ‡¨ğŸ‡¦",
    "Canada/Pacific": "ğŸ‡¨ğŸ‡¦",
    "Canada/Saskatchewan": "ğŸ‡¨ğŸ‡¦",
    "Canada/Yukon": "ğŸ‡¨ğŸ‡¦",
    "CET": "ğŸ‡ªğŸ‡º",
    "Chile/Continental": "ğŸ‡¨ğŸ‡±",
    "Chile/EasterIsland": "ğŸ‡¨ğŸ‡±",
    "CST6CDT": "ğŸ‡¨ğŸ‡¦",
    "Cuba": "ğŸ‡¨ğŸ‡º",
    "EET": "ğŸ‡ªğŸ‡º",
    "Egypt": "ğŸ‡ªğŸ‡¬",
    "Eire": "ğŸ‡ªğŸ‡º",
    "EST": "ğŸ‡ºğŸ‡¸",
    "EST5EDT": "ğŸ‡ºğŸ‡¸",
    "Etc/GMT": "",
    "Etc/GMT+0": "",
    "Etc/GMT+1": "",
    "Etc/GMT+10": "",
    "Etc/GMT+11": "",
    "Etc/GMT+12": "",
    "Etc/GMT+2": "",
    "Etc/GMT+3": "",
    "Etc/GMT+4": "",
    "Etc/GMT+5": "",
    "Etc/GMT+6": "",
    "Etc/GMT+7": "",
    "Etc/GMT+8": "",
    "Etc/GMT+9": "",
    "Etc/GMT0": "",
    "Etc/GMT-0": "",
    "Etc/GMT-1": "",
    "Etc/GMT-10": "",
    "Etc/GMT-11": "",
    "Etc/GMT-12": "",
    "Etc/GMT-13": "",
    "Etc/GMT-14": "",
    "Etc/GMT-2": "",
    "Etc/GMT-3": "",
    "Etc/GMT-4": "",
    "Etc/GMT-5": "",
    "Etc/GMT-6": "",
    "Etc/GMT-7": "",
    "Etc/GMT-8": "",
    "Etc/GMT-9": "",
    "Etc/Greenwich": "",
    "Etc/UCT": "",
    "Etc/Universal": "",
    "Etc/UTC": "",
    "Etc/Zulu": "",
    "Europe/Amsterdam": "ğŸ‡³ğŸ‡±",
    "Europe/Andorra": "ğŸ‡¦ğŸ‡©",
    "Europe/Astrakhan": "ğŸ‡·ğŸ‡º",
    "Europe/Athens": "ğŸ‡¬ğŸ‡·",
    "Europe/Belfast": "ğŸ‡¬ğŸ‡§",
    "Europe/Belgrade": "ğŸ‡·ğŸ‡¸",
    "Europe/Berlin": "ğŸ‡©ğŸ‡ª",
    "Europe/Bratislava": "ğŸ‡¸ğŸ‡°",
    "Europe/Brussels": "ğŸ‡§ğŸ‡ª",
    "Europe/Bucharest": "ğŸ‡·ğŸ‡´",
    "Europe/Budapest": "ğŸ‡­ğŸ‡º",
    "Europe/Busingen": "ğŸ‡©ğŸ‡ª",
    "Europe/Chisinau": "ğŸ‡²ğŸ‡©",
    "Europe/Copenhagen": "ğŸ‡©ğŸ‡°",
    "Europe/Dublin": "ğŸ‡®ğŸ‡ª",
    "Europe/Gibraltar": "ğŸ‡¬ğŸ‡®",
    "Europe/Guernsey": "ğŸ‡¬ğŸ‡¬",
    "Europe/Helsinki": "ğŸ‡«ğŸ‡®",
    "Europe/Isle_of_Man": "ğŸ‡®ğŸ‡²",
    "Europe/Istanbul": "ğŸ‡¹ğŸ‡·",
    "Europe/Jersey": "ğŸ‡¯ğŸ‡ª",
    "Europe/Kaliningrad": "ğŸ‡·ğŸ‡º",
    "Europe/Kiev": "ğŸ‡ºğŸ‡¦",
    "Europe/Kirov": "ğŸ‡·ğŸ‡º",
    "Europe/Lisbon": "ğŸ‡µğŸ‡¹",
    "Europe/Ljubljana": "ğŸ‡¸ğŸ‡®",
    "Europe/London": "ğŸ‡¬ğŸ‡§",
    "Europe/Luxembourg": "ğŸ‡±ğŸ‡º",
    "Europe/Madrid": "ğŸ‡ªğŸ‡¸",
    "Europe/Malta": "ğŸ‡²ğŸ‡¹",
    "Europe/Mariehamn": "ğŸ‡¦ğŸ‡½",
    "Europe/Minsk": "ğŸ‡§ğŸ‡¾",
    "Europe/Monaco": "ğŸ‡²ğŸ‡¨",
    "Europe/Moscow": "ğŸ‡·ğŸ‡º",
    "Europe/Oslo": "ğŸ‡³ğŸ‡´",
    "Europe/Paris": "ğŸ‡«ğŸ‡·",
    "Europe/Podgorica": "ğŸ‡²ğŸ‡ª",
    "Europe/Prague": "ğŸ‡¨ğŸ‡¿",
    "Europe/Riga": "ğŸ‡±ğŸ‡»",
    "Europe/Rome": "ğŸ‡®ğŸ‡¹",
    "Europe/Samara": "ğŸ‡·ğŸ‡º",
    "Europe/San_Marino": "ğŸ‡¸ğŸ‡²",
    "Europe/Sarajevo": "ğŸ‡§ğŸ‡¦",
    "Europe/Saratov": "ğŸ‡·ğŸ‡º",
    "Europe/Simferopol": "ğŸ‡ºğŸ‡¦",
    "Europe/Skopje": "ğŸ‡²ğŸ‡°",
    "Europe/Sofia": "ğŸ‡§ğŸ‡¬",
    "Europe/Stockholm": "ğŸ‡¸ğŸ‡ª",
    "Europe/Tallinn": "ğŸ‡ªğŸ‡ª",
    "Europe/Tirane": "ğŸ‡¦ğŸ‡±",
    "Europe/Tiraspol": "ğŸ‡²ğŸ‡©",
    "Europe/Ulyanovsk": "ğŸ‡·ğŸ‡º",
    "Europe/Uzhgorod": "ğŸ‡ºğŸ‡¦",
    "Europe/Vaduz": "ğŸ‡±ğŸ‡®",
    "Europe/Vatican": "ğŸ‡»ğŸ‡¦",
    "Europe/Vienna": "ğŸ‡¦ğŸ‡¹",
    "Europe/Vilnius": "ğŸ‡±ğŸ‡¹",
    "Europe/Volgograd": "ğŸ‡·ğŸ‡º",
    "Europe/Warsaw": "ğŸ‡µğŸ‡±",
    "Europe/Zagreb": "ğŸ‡­ğŸ‡·",
    "Europe/Zaporozhye": "ğŸ‡ºğŸ‡¦",
    "Europe/Zurich": "ğŸ‡¨ğŸ‡­",
    "GB": "ğŸ‡¬ğŸ‡§",
    "GB-Eire": "ğŸ‡¬ğŸ‡§",
    "GMT": "ğŸ‡¬ğŸ‡§",
    "GMT+0": "ğŸ‡¬ğŸ‡§",
    "GMT0": "ğŸ‡¬ğŸ‡§",
    "GMT-0": "ğŸ‡¬ğŸ‡§",
    "Greenwich": "ğŸ‡¬ğŸ‡§",
    "Hongkong": "ğŸ‡­ğŸ‡°",
    "HST": "ğŸ‡ºğŸ‡¸",
    "Iceland": "ğŸ‡®ğŸ‡¸",
    "Indian/Antananarivo": "ğŸ‡²ğŸ‡¬",
    "Indian/Chagos": "ğŸ‡®ğŸ‡´",
    "Indian/Christmas": "ğŸ‡¨ğŸ‡½",
    "Indian/Cocos": "ğŸ‡¨ğŸ‡¨",
    "Indian/Comoro": "ğŸ‡°ğŸ‡²",
    "Indian/Kerguelen": "ğŸ‡¹ğŸ‡«",
    "Indian/Mahe": "ğŸ‡¸ğŸ‡¨",
    "Indian/Maldives": "ğŸ‡²ğŸ‡»",
    "Indian/Mauritius": "ğŸ‡²ğŸ‡º",
    "Indian/Mayotte": "ğŸ‡¾ğŸ‡¹",
    "Indian/Reunion": "ğŸ‡·ğŸ‡ª",
    "Iran": "ğŸ‡®ğŸ‡·",
    "Israel": "ğŸ‡®ğŸ‡±",
    "Jamaica": "ğŸ‡¯ğŸ‡²",
    "Japan": "ğŸ‡¯ğŸ‡µ",
    "Kwajalein": "ğŸ‡²ğŸ‡­",
    "Libya": "ğŸ‡±ğŸ‡¾",
    "MET": "ğŸ‡ªğŸ‡º",
    "Mexico/BajaNorte": "ğŸ‡²ğŸ‡½",
    "Mexico/BajaSur": "ğŸ‡²ğŸ‡½",
    "Mexico/General": "ğŸ‡²ğŸ‡½",
    "MST": "ğŸ‡ºğŸ‡¸",
    "MST7MDT": "ğŸ‡ºğŸ‡¸",
    "Navajo": "ğŸ‡ºğŸ‡¸",
    "NZ": "ğŸ‡³ğŸ‡¿",
    "NZ-CHAT": "ğŸ‡³ğŸ‡¿",
    "Pacific/Apia": "ğŸ‡¼ğŸ‡¸",
    "Pacific/Auckland": "ğŸ‡³ğŸ‡¿",
    "Pacific/Bougainville": "ğŸ‡µğŸ‡¬",
    "Pacific/Chatham": "ğŸ‡³ğŸ‡¿",
    "Pacific/Chuuk": "ğŸ‡«ğŸ‡²",
    "Pacific/Easter": "ğŸ‡¨ğŸ‡±",
    "Pacific/Efate": "ğŸ‡»ğŸ‡º",
    "Pacific/Enderbury": "ğŸ‡°ğŸ‡®",
    "Pacific/Fakaofo": "ğŸ‡¹ğŸ‡°",
    "Pacific/Fiji": "ğŸ‡«ğŸ‡¯",
    "Pacific/Funafuti": "ğŸ‡¹ğŸ‡»",
    "Pacific/Galapagos": "ğŸ‡ªğŸ‡¨",
    "Pacific/Gambier": "ğŸ‡µğŸ‡«",
    "Pacific/Guadalcanal": "ğŸ‡¸ğŸ‡§",
    "Pacific/Guam": "ğŸ‡¬ğŸ‡º",
    "Pacific/Honolulu": "ğŸ‡ºğŸ‡¸",
    "Pacific/Johnston": "ğŸ‡ºğŸ‡²",
    "Pacific/Kiritimati": "ğŸ‡°ğŸ‡®",
    "Pacific/Kosrae": "ğŸ‡«ğŸ‡²",
    "Pacific/Kwajalein": "ğŸ‡²ğŸ‡­",
    "Pacific/Majuro": "ğŸ‡²ğŸ‡­",
    "Pacific/Marquesas": "ğŸ‡µğŸ‡«",
    "Pacific/Midway": "ğŸ‡ºğŸ‡²",
    "Pacific/Nauru": "ğŸ‡³ğŸ‡·",
    "Pacific/Niue": "ğŸ‡³ğŸ‡º",
    "Pacific/Norfolk": "ğŸ‡³ğŸ‡«",
    "Pacific/Noumea": "ğŸ‡³ğŸ‡¨",
    "Pacific/Pago_Pago": "ğŸ‡¦ğŸ‡¸",
    "Pacific/Palau": "ğŸ‡µğŸ‡¼",
    "Pacific/Pitcairn": "ğŸ‡µğŸ‡³",
    "Pacific/Pohnpei": "ğŸ‡«ğŸ‡²",
    "Pacific/Ponape": "ğŸ‡«ğŸ‡²",
    "Pacific/Port_Moresby": "ğŸ‡µğŸ‡¬",
    "Pacific/Rarotonga": "ğŸ‡¨ğŸ‡°",
    "Pacific/Saipan": "ğŸ‡²ğŸ‡µ",
    "Pacific/Samoa": "ğŸ‡¼ğŸ‡¸",
    "Pacific/Tahiti": "ğŸ‡µğŸ‡«",
    "Pacific/Tarawa": "ğŸ‡°ğŸ‡®",
    "Pacific/Tongatapu": "ğŸ‡¹ğŸ‡´",
    "Pacific/Truk": "ğŸ‡«ğŸ‡²",
    "Pacific/Wake": "ğŸ‡ºğŸ‡²",
    "Pacific/Wallis": "ğŸ‡¼ğŸ‡«",
    "Pacific/Yap": "ğŸ‡«ğŸ‡²",
    "Poland": "ğŸ‡µğŸ‡±",
    "Portugal": "ğŸ‡µğŸ‡¹",
    "PRC": "ğŸ‡¨ğŸ‡³",
    "PST8PDT": "ğŸ‡®ğŸ‡³",
    "ROC": "ğŸ‡¹ğŸ‡¼",
    "ROK": "ğŸ‡°ğŸ‡·",
    "Singapore": "ğŸ‡¸ğŸ‡¬",
    "Turkey": "ğŸ‡¹ğŸ‡·",
    "UCT": "",
    "Universal": "",
    "US/Alaska": "ğŸ‡ºğŸ‡¸",
    "US/Aleutian": "ğŸ‡ºğŸ‡¸",
    "US/Arizona": "ğŸ‡ºğŸ‡¸",
    "US/Central": "ğŸ‡ºğŸ‡¸",
    "US/Eastern": "ğŸ‡ºğŸ‡¸",
    "US/East-Indiana": "ğŸ‡ºğŸ‡¸",
    "US/Hawaii": "ğŸ‡ºğŸ‡¸",
    "US/Indiana-Starke": "ğŸ‡ºğŸ‡¸",
    "US/Michigan": "ğŸ‡ºğŸ‡¸",
    "US/Mountain": "ğŸ‡ºğŸ‡¸",
    "US/Pacific": "ğŸ‡ºğŸ‡¸",
    "US/Pacific-New": "ğŸ‡ºğŸ‡¸",
    "US/Samoa": "ğŸ‡ºğŸ‡¸",
    "UTC": "",
    "WET": "ğŸ‡·ğŸ‡º",
    "W-SU": "",
    "Zulu": ""
}


world_zones = {
    'GMT': 'UTC',
    'Europe/Dublin': 'Dublin',
    'Europe/London': 'London',
    'Europe/Berlin': 'Berlin',
    'Europe/Paris': 'Paris',
    'Europe/Amsterdam': 'Amsterdam',
    'Europe/Moscow': 'Moscow',
    'Asia/Dubai': 'Dubai',
    'Asia/Tehran': 'Tehran',
    'Asia/Shanghai': 'Shanghai',
    'Asia/Tokyo': 'Tokyo',
    'Asia/Seoul': 'Seoul',
    'Asia/Bangkok': 'Bangkok',
    'America/New_York': 'New York',
    'America/Los_Angeles': 'Los Angeles',
}

def zone_flag(zone):
    for key, value in timezones.items():
        if zone.endswith(key):
            return value

    return ''

def  world_time(zone, city):
    tz = pytz.timezone(zone)
    zoned_now = datetime.now(tz)
    return "{} {}{}".format(zoned_now.strftime('%m-%d %H:%M:%S'), zone_flag(zone), city)


def timezone():
    global timezones
    local_zone = os.path.realpath('/etc/localtime')
    return zone_flag(local_zone)


def local_time():
    return "{} {}".format(time.strftime('%m-%d %H:%M:%S'), timezone())

def get_world_time():
    import io
    out = io.StringIO()
    print("<pre>", file=out)
    for zone, city in world_zones.items():
        print(world_time(zone, city), file=out)
    print("</pre>", file=out)
    result = out.getvalue()
    out.close()
    return result


async def main(connection):
    icon1x = iterm2.StatusBarComponent.Icon(1, ICON1X)
    icon2x = iterm2.StatusBarComponent.Icon(2, ICON2X)

    component = iterm2.StatusBarComponent(
        short_description="Enhanced Time",
        detailed_description="Display current tme with extra information",
        knobs=[],
        exemplar=local_time(),
        update_cadence=1,
        identifier="catj.moe.localtime",
        icons=[icon1x, icon2x])

    @iterm2.StatusBarRPC
    async def localtime(knobs):
        return local_time()
    
    @iterm2.RPC
    async def onclick(session_id):
        word_time = "Loading"
        try:
            word_time = get_world_time()
        except:
            word_time = "Loading"
        if word_time is not None:
            await component.async_open_popover(session_id, word_time, iterm2.util.Size(256, 340))

    # Register the component.
    await component.async_register(connection, localtime, onclick=onclick)


iterm2.run_forever(main)
